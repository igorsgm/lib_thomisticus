function xdiff_string_diff(r,e,n,t){var i,o,f,a,l,u,h,c,g,s,p=0,d=0,w=0,m=Number.POSITIVE_INFINITY,y=0,E=3,x="@@ ",_=" @@",A="-",b="+",v=",",I=" ",F="-",N="+",R="\n",T=function(r){if("string"!=typeof r)throw new Error("String parameter required");return r.replace(/(^\s*)|(\s*$)/g,"")},C=function(r){var e,n,t,i=arguments,o=arguments.length,f=["number","boolean","string","function","object","undefined"],a=typeof r;if("string"!==a&&"function"!==a)throw new Error("Bad type parameter");if(2>o)throw new Error("Too few arguments");if("string"===a){if(r=T(r),""===r)throw new Error("Bad type parameter");for(t=0;t<f.length;t++)if(e=f[t],e===r){for(n=1;o>n;n++)if(typeof i[n]!==r)throw new Error("Bad type");return}throw new Error("Bad type parameter")}for(n=1;o>n;n++)if(!(i[n]instanceof r))throw new Error("Bad type")},P=function(r,e){var n;for(C(Array,r),n=0;n<r.length;n++)if(r[n]===e)return!0;return!1},k=function(r){var e,n,t,i=arguments,o=arguments.length,f=["number","boolean","string","function","object","undefined"],a=typeof r;if("string"!==a&&"function"!==a)throw new Error("Bad type parameter");if(2>o)throw new Error("Too few arguments");if("string"===a){if(r=T(r),""===r)return!1;for(t=0;t<f.length;t++)if(e=f[t],e===r){for(n=1;o>n;n++)if(typeof i[n]!==r)return!1;return!0}throw new Error("Bad type parameter")}for(n=1;o>n;n++)if(!(i[n]instanceof r))return!1;return!0},B=function(r,e){var n,t=[];for(C("number",r),n=0;r>n;n++)t.push(e);return t},M=function(r){return C("string",r),""===r?[]:r.split("\n")},S=function(r){return k(Array,r)&&0===r.length},j=function(r,e,n,t){if(!k(Array,r,e))throw new Error("Array parameters are required");if(S(r)||S(e))return[];var i=function(r,e){var n,t,i,o=B(e.length+1,0);for(n=0;n<r.length;n++)for(i=o.slice(0),t=0;t<e.length;t++)r[n]===e[t]?o[t+1]=i[t]+1:o[t+1]=Math.max(o[t],i[t+1]);return o},o=function(r,e,n,t){var f,a,l,u,h,c,g,s,p,w=r.length,m=t.length;if(0===w)return[];if(1===w)return P(t,r[0])?(n[e]=!0,[r[0]]):[];for(f=Math.floor(w/2),a=r.slice(0,f),l=r.slice(f),u=i(a,t),h=i(l.slice(0).reverse(),t.slice(0).reverse()),c=0,g=0,d=0;m>=d;d++)u[d]+h[m-d]>g&&(c=d,g=u[d]+h[m-d]);return s=t.slice(0,c),p=t.slice(c),o(a,e,n,s).concat(o(l,e+f,n,p))};return o(r,0,n,e),o(e,0,t,r)};if(k("string",r,e)===!1)return!1;if(r===e)return"";("number"!=typeof n||n>m||y>n)&&(n=E),g=M(r),s=M(e);var D=g.length,H=s.length,X=B(D,!1),O=B(H,!1),L=j(g,s,X,O).length,V="";if(0===L){for(V=[x,A,D>0?"1":"0",v,D," ",b,H>0?"1":"0",v,H,_].join(""),p=0;D>p;p++)V+=R+F+g[p];for(d=0;H>d;d++)V+=R+N+s[d];return V}for(var $=[],q=[],z=[],U=[],G=function(r){if(0===r.length||0===n)return[];var e=Math.max(r.length-n,0);return r.slice(e)},Y=function(r){return 0===r.length||0===n?[]:r.slice(0,Math.min(n,r.length))};D>p&&X[p]===!0&&O[p]===!0;)$.push(g[p]),p++;for(d=p,w=p,i=p,o=d,f=p,a=d;D>p||H>d;){for(;D>p&&X[p]===!1;)p++;for(f=p;H>d&&O[d]===!1;)d++;for(a=d,q=[];D>p&&X[p]===!0&&H>d&&O[d]===!0;)q.push(g[p]),w++,p++,d++;if(w>=L||q.length>=2*n){for(q.length<2*n&&(q=[],p=D,d=H,f=D,a=H),z=G($),U=Y(q),i-=z.length,o-=z.length,f+=U.length,a+=U.length,l=i+1,u=o+1,h=f-i,c=a-o,V+=[x,A,l,v,h," ",b,u,v,c,_,R].join("");f>i||a>o;)f>i&&X[i]===!0&&O[o]===!0?(V+=I+g[i]+R,i++,o++):f>i&&X[i]===!1?(V+=F+g[i]+R,i++):a>o&&O[o]===!1&&(V+=N+s[o]+R,o++);i=p,o=d,$=q}}return V.length>0&&V.charAt(V.length)===R&&(V=V.slice(0,-1)),V}function xdiff_string_patch(r,e,n,t){var i=function(r){return[r.global?"g":"",r.ignoreCase?"i":"",r.multiline?"m":"",r.extended?"x":"",r.sticky?"y":""].join("")},o=function(r,e){if(!(e instanceof RegExp))return String.prototype.split.apply(r,arguments);var n,t,o=String(r),f=[],a=0,l=1/0,u=e._xregexp,h=new RegExp(e.source,i(e)+"g");for(u&&(h._xregexp={source:u.source,captureNames:u.captureNames?u.captureNames.slice(0):null});(n=h.exec(o))&&!(h.lastIndex>a&&(f.push(o.slice(a,n.index)),n.length>1&&n.index<o.length&&Array.prototype.push.apply(f,n.slice(1)),t=n[0].length,a=h.lastIndex,f.length>=l));)h.lastIndex===n.index&&h.lastIndex++;return a===o.length?(!h.test("")||t)&&f.push(""):f.push(o.slice(a)),f.length>l?f.slice(0,l):f},f=0,a=0,l=[],u=0,h="",c=/^@@\s+-(\d+),(\d+)\s+\+(\d+),(\d+)\s+@@$/,g=/\r?\n/,s=o(e.replace(/(\r?\n)+$/,""),g),p=o(r,g),d=[],w=0,m="",y=0,E={XDIFF_PATCH_NORMAL:1,XDIFF_PATCH_REVERSE:2,XDIFF_PATCH_IGNORESPACE:4};if("string"!=typeof r||!e)return!1;if(n||(n="XDIFF_PATCH_NORMAL"),"number"!=typeof n){for(n=[].concat(n),f=0;f<n.length;f++)E[n[f]]&&(y|=E[n[f]]);n=y}if(n&E.XDIFF_PATCH_NORMAL){for(f=0,a=s.length;a>f;f++)if(l=s[f].match(c)){for(u=w,w=l[1]-1;w>u;)d[d.length]=p[u++];for(;s[++f]&&null===c.exec(s[f]);)switch(h=s[f].charAt(0)){case"-":++w;break;case"+":d[d.length]=s[f].slice(1);break;case" ":d[d.length]=p[w++];break;default:throw new Error("Unrecognized initial character in unidiff line")}s[f]&&f--}for(;w>0&&w<p.length;)d[d.length]=p[w++]}else if(n&E.XDIFF_PATCH_REVERSE){for(f=0,a=s.length;a>f;f++)if(l=s[f].match(c)){for(u=w,w=l[3]-1;w>u;)d[d.length]=p[u++];for(;s[++f]&&null===c.exec(s[f]);)switch(h=s[f].charAt(0)){case"-":d[d.length]=s[f].slice(1);break;case"+":++w;break;case" ":d[d.length]=p[w++];break;default:throw new Error("Unrecognized initial character in unidiff line")}s[f]&&f--}for(;w>0&&w<p.length;)d[d.length]=p[w++]}return t&&(t.value=m),d.join("\n")}